'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Select=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,a),this.isMultiple=!1,this.setConf(c),this.setElement(b),this.setEvents(),this.generateMarkup()}return _createClass(a,[{key:'setConf',value:function setConf(b){var c=b||'select';this.conf={main:c,old:c+'__old',container:c+'__container',active:c+'__active',dropdown:c+'__dropdown',options:c+'__options',optionsHidden:c+'__options--hidden',option:c+'__option',selected:c+'__option--selected'}}},{key:'setElement',value:function setElement(b){return'string'==typeof b?this.$el=document.querySelector(b):b.jquery?this.$el=b.get()[0]:b[0]?this.$el=b[0]:this.$el=b}},{key:'setEvents',value:function setEvents(){var b=this;document.addEventListener('click',function(c){b.$optionsContainer.contains(c.target)||b.$active.contains(c.target)||b.e_hideDropdown()})}},{key:'generateMarkup',value:function generateMarkup(){var f=this,c=document.createElement('div');c.classList.add(this.conf.main),this.$el.parentNode.replaceChild(c,this.$el),this.$el.classList.add(this.conf.old),c.appendChild(this.$el);var d=document.createElement('div');d.classList.add(this.conf.container),c.appendChild(d),this.$active=document.createElement('a'),this.$active.classList.add(this.conf.active),this.$active.innerHTML=this.getSelectedOption().innerHTML,this.$active.addEventListener('click',function(g){return f.e_toggleDropdown(g)}),d.appendChild(this.$active),this.$optionsContainer=document.createElement('div'),this.$optionsContainer.classList.add(this.conf.options),this.$optionsContainer.classList.add(this.conf.optionsHidden),this.$optionsContainer.setAttribute('role','listbox'),d.appendChild(this.$optionsContainer);for(var b=0;b<this.$el.children.length;b++)this.$optionsContainer.appendChild(this.generateOption(this.$el.children[b]))}},{key:'e_toggleDropdown',value:function e_toggleDropdown(b){b&&b.preventDefault(),this.$optionsContainer.classList.toggle(this.conf.optionsHidden)}},{key:'e_hideDropdown',value:function e_hideDropdown(){this.$optionsContainer.classList.add(this.conf.optionsHidden)}},{key:'e_select',value:function e_select(b){this.isMultiple||this.deselectAll(),b.target.classList.add(this.conf.selected),this.$el.value=b.target.dataset.value,this.$el.dispatchEvent(new Event('change')),this.setText(b.target.innerHTML),this.e_hideDropdown(b)}},{key:'getSelectedOption',value:function getSelectedOption(){return this.$el.children[this.$el.selectedIndex]}},{key:'generateOption',value:function generateOption(b){var d=this,c=document.createElement('a');return c.classList.add(this.conf.option),this.$el.value==b.value&&c.classList.add(this.conf.selected),c.innerHTML=b.innerHTML,c.dataset.value=b.value,c.setAttribute('role','option'),c.addEventListener('click',function(f){return d.e_select(f)},!1),c}},{key:'findOptionByValue',value:function findOptionByValue(b){for(var d=this.$el.children,c=0;c<d.length;c++)if(d[c].value==b)return d[c]}},{key:'changed',value:function changed(b){this.$el.addEventListener('change',b)}},{key:'value',value:function value(){return this.$el.value}},{key:'setText',value:function setText(b){this.$active.innerHTML=b}},{key:'deselectAll',value:function deselectAll(){for(var b=0;b<this.$el.children.length;b++)this.$el.children[b].selected=!1,this.$optionsContainer.children[b].classList.remove(this.conf.selected)}}]),a}();exports.default=Select;